// jQuery минимальная реализация
(function(window) {
    function $(selector) {
        if (typeof selector === 'function') {
            if (document.readyState === 'complete') {
                selector();
            } else {
                document.addEventListener('DOMContentLoaded', selector);
            }
            return;
        }
        
        const elements = typeof selector === 'string' 
            ? document.querySelectorAll(selector)
            : [selector];
            
        return {
            length: elements.length,
            each: function(callback) {
                elements.forEach((el, i) => callback.call(el, i, el));
                return this;
            },
            click: function(callback) {
                elements.forEach(el => el.addEventListener('click', callback));
                return this;
            },
            html: function(content) {
                if (content === undefined) {
                    return elements[0]?.innerHTML;
                }
                elements.forEach(el => el.innerHTML = content);
                return this;
            },
            is: function(check) {
                if (check === ':checked') {
                    return elements[0]?.checked;
                }
                return false;
            },
            closest: function(selector) {
                return $(elements[0]?.closest(selector));
            },
            attr: function(name, value) {
                if (value === undefined) {
                    return elements[0]?.getAttribute(name);
                }
                elements.forEach(el => el.setAttribute(name, value));
                return this;
            },
            val: function() {
                return elements[0]?.value;
            },
            next: function(selector) {
                const next = elements[0]?.nextElementSibling;
                return $(next);
            },
            prev: function(selector) {
                const prev = elements[0]?.previousElementSibling;
                return $(prev);
            },
            find: function(selector) {
                const found = elements[0]?.querySelector(selector);
                return $(found);
            },
            trigger: function(event) {
                elements.forEach(el => {
                    if (event === 'click') {
                        el.click();
                    }
                });
                return this;
            },
            removeClass: function(className) {
                elements.forEach(el => el?.classList.remove(className));
                return this;
            },
            addClass: function(className) {
                elements.forEach(el => el?.classList.add(className));
                return this;
            }
        };
    }
    
    window.$ = window.jQuery = $;
})(window);
